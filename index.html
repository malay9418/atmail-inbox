<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Atmail - super fast disposable email</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            --nav-clr: #fff;
            --body-clr: #F3F4F6;
            --mail-clr: #fff;
            --icon: rgb(107, 114, 128);
            --icon-h: rgb(87, 83, 78);
            --business: #5850EC;
            --smooth-txt: #252F3F;
            --border: gray;
            -webkit-tap-highlight-color: transparent;
            --color: #000;
            --color-s: #808080;
        }


        body {
            margin: 0;
            font-family: "Poppins", sans-serif;
            font-style: normal;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            color: var(--color);
        }

        nav {
            padding: 16px 20px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        main {
            flex: 1;
            background-color: var(--body-clr);
        }

        .business {
            height: 30px;
        }

        .icon-b {
            height: 32px;
            width: 32px;
            cursor: pointer;
            color: var(--icon);
            transition: transform .1s ease-in-out;
        }

        .icon-b:hover {
            color: var(--icon-h);
        }

        .icon-b:active {
            transform: scale(1.1);
        }

        .icon-s:active {
            transform: scale(1.1);
        }

        .icon-s {
            transition: transform .1s ease-in-out;
            color: var(--icon);
            height: 1rem;
            width: 1rem;
            cursor: pointer;
        }

        .icon-s:hover {
            color: var(--icon-h);
        }


        #current-mail {
            font-size: 16px;
            font-family: monospace;
            color: var(--business);
        }

        .menu {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .business-txt {
            height: 25px;
            margin-left: 3px;
            position: relative;
            top: -3px;
        }

        .refresh-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #fff;
            border: 1px solid var(--border);
            height: 50px;
            width: 50px;
            display: grid;
            place-items: center;
            border-radius: 50%;
            cursor: pointer;
        }

        .rotating {
            animation: rotate360 5s linear infinite;

        }

        main {
            padding: 10px;
        }

        main .inbox-intro {
            display: none;
            padding: 10px;
            text-align: center;
            padding-top: 50px;
            color: var(--color-s);
        }

        main .mails:empty~.inbox-intro {
            display: block;
        }

        .mails {
            background-color: var(--mail-clr);
            border-radius: 5px;
        }

        .mail {
            white-space: nowrap;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            /* border-bottom: 1px solid var(--border); */
            padding: 10px;
        }

        .mail::after {
            content: '';
            background: rgb(0, 0, 0);
            background: linear-gradient(90deg, rgba(0, 0, 0, 0) 0%, var(--mail-clr) 60%);
            height: 100%;
            width: 5vw;
            position: absolute;
            top: 0;
            right: 0;
        }

        .mail p:nth-child(1) {
            font-weight: 700;
            font-size: 16px;
        }

        .mail p:nth-child(2) {
            color: var(--color-s);
            font-size: 15px;
        }

        .mail span {
            color: var(--business);
            font-size: 14px;
        }

        .mail p {
            margin: 0;
        }

        .border-btm {
            display: block;
            height: 2px;
            background-color: var(--border);
            margin-top: 5px;
        }


        @keyframes rotate360 {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(3600deg);

            }
        }

        @keyframes slideUp {
            0% {
                transform: translate(0, 100%);
            }

            100% {
                transform: translate(0, 0%);
            }
        }

        .mail-view {
            background-color: var(--body-clr);
            position: fixed;
            width: calc(100dvw - 40px);
            height: calc(100dvh - 20px);
            left: 20px;
            bottom: 0;
            z-index: 11;
            box-shadow: rgba(14, 30, 37, 0.12) 0px 2px 4px 0px, rgba(14, 30, 37, 0.32) 0px 2px 16px 0px;
            border-radius: 10px 10px 0 0;
            box-sizing: border-box;
            display: none;
            overflow-y: scroll;

        }

        .mail-view-shown {
            display: block !important;
            animation: slideUp .2s linear;
        }

        .head-btns {
            border-radius: 10px 10px 0 0;
            display: flex;
            background-color: var(--nav-clr);
            padding: 16px;
            font-size: 14px;
            align-items: center;
            justify-content: flex-start;
        }

        #mail-html {
            padding: 10px;
            overflow: scroll;
        }


        @media (max-width: 480px) {
            .business-txt {
                display: none;
            }

            #current-mail {
                font-size: 12px;
            }

            nav {
                padding: 16px 14px;
            }

            .business {
                height: 20px;
            }

            .mail-view {
                left: 5px;
                width: calc(100dvw - 10px);
            }
        }
    </style>
</head>

<body>
    <nav>
        <svg class="business" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M24.486 7.512a12 12 0 1 0-1.972 18.568 2 2 0 1 1 2.174 3.356A16 16 0 1 1 32 15.998a6 6 0 0 1-9.6 4.802 8 8 0 1 1 1.6-4.802 2 2 0 1 0 4 0c0-3.074-1.172-6.14-3.514-8.486ZM20 15.998a4 4 0 1 0-8 0 4 4 0 0 0 8 0Z"
                fill="var(--business)" />
        </svg>
        <svg viewBox="0 0 76.94 25.031" xmlns="http://www.w3.org/2000/svg" class="business-txt">
            <g stroke-linecap="round" fill-rule="evenodd" font-size="9pt" stroke="#000" stroke-width="0" fill="#000"
                style="stroke:#000;stroke-width:0;fill:var(--smooth-txt)">
                <path
                    d="M 39.891 14.609 L 39.891 23.734 A 1.763 1.763 0 0 1 39.878 23.957 Q 39.847 24.197 39.744 24.33 A 0.43 0.43 0 0 1 39.695 24.383 A 0.556 0.556 0 0 1 39.52 24.489 Q 39.332 24.562 39.031 24.562 L 35.813 24.562 A 1.928 1.928 0 0 1 35.583 24.55 Q 35.292 24.515 35.148 24.383 A 0.498 0.498 0 0 1 35.029 24.207 Q 34.964 24.052 34.955 23.812 A 2.078 2.078 0 0 1 34.953 23.734 L 34.953 15.422 A 7.586 7.586 0 0 0 34.908 14.562 Q 34.783 13.471 34.313 12.914 A 2.04 2.04 0 0 0 33.261 12.263 Q 32.92 12.17 32.51 12.158 A 4.182 4.182 0 0 0 32.391 12.156 A 4.147 4.147 0 0 0 31.667 12.216 Q 31.265 12.287 30.944 12.444 A 2.118 2.118 0 0 0 30.586 12.664 A 2.704 2.704 0 0 0 29.702 13.86 A 3.336 3.336 0 0 0 29.641 14.031 L 29.641 23.734 A 1.763 1.763 0 0 1 29.628 23.957 Q 29.597 24.197 29.494 24.33 A 0.43 0.43 0 0 1 29.445 24.383 A 0.556 0.556 0 0 1 29.27 24.489 Q 29.082 24.562 28.781 24.562 L 25.563 24.562 A 1.928 1.928 0 0 1 25.333 24.55 Q 25.042 24.515 24.898 24.383 A 0.498 0.498 0 0 1 24.779 24.207 Q 24.714 24.052 24.705 23.812 A 2.078 2.078 0 0 1 24.703 23.734 L 24.703 15.422 A 6.542 6.542 0 0 0 24.648 14.537 Q 24.505 13.499 24 12.937 A 2.322 2.322 0 0 0 22.349 12.162 A 3.174 3.174 0 0 0 22.156 12.156 A 3.57 3.57 0 0 0 21.436 12.225 Q 20.973 12.32 20.616 12.548 A 2.11 2.11 0 0 0 20.422 12.688 Q 19.766 13.219 19.406 14.031 L 19.406 23.734 A 1.763 1.763 0 0 1 19.393 23.957 Q 19.363 24.197 19.259 24.33 A 0.43 0.43 0 0 1 19.211 24.383 A 0.556 0.556 0 0 1 19.035 24.489 Q 18.847 24.562 18.547 24.562 L 15.328 24.562 A 1.928 1.928 0 0 1 15.098 24.55 Q 14.808 24.515 14.664 24.383 A 0.498 0.498 0 0 1 14.545 24.207 Q 14.479 24.052 14.47 23.812 A 2.078 2.078 0 0 1 14.469 23.734 L 14.469 10.641 A 1.451 1.451 0 0 1 14.484 10.423 Q 14.501 10.309 14.538 10.217 A 0.644 0.644 0 0 1 14.625 10.062 A 7.119 7.119 0 0 1 15.036 9.565 A 9.15 9.15 0 0 1 15.414 9.172 A 9.799 9.799 0 0 1 15.858 8.763 Q 16.091 8.561 16.362 8.347 A 17.28 17.28 0 0 1 16.547 8.203 A 0.93 0.93 0 0 1 16.683 8.115 Q 16.764 8.073 16.842 8.057 A 0.473 0.473 0 0 1 16.938 8.047 Q 17.06 8.047 17.207 8.127 A 1.175 1.175 0 0 1 17.328 8.203 A 15.149 15.149 0 0 1 17.902 8.676 Q 18.166 8.906 18.39 9.125 A 9.063 9.063 0 0 1 18.453 9.188 A 8.025 8.025 0 0 1 19.143 9.97 A 7.212 7.212 0 0 1 19.281 10.156 L 19.359 10.156 Q 19.891 9.484 21.016 8.828 Q 22.141 8.172 24.234 8.172 A 10.635 10.635 0 0 1 25.278 8.219 Q 26.507 8.341 27.203 8.773 A 5.943 5.943 0 0 1 28.274 9.614 A 5.126 5.126 0 0 1 28.781 10.203 Q 29.201 9.692 29.955 9.202 A 9.582 9.582 0 0 1 30.57 8.836 A 4.575 4.575 0 0 1 31.593 8.438 Q 32.59 8.172 33.984 8.172 A 9.601 9.601 0 0 1 35.605 8.299 Q 36.479 8.449 37.162 8.776 A 4.049 4.049 0 0 1 38.5 9.781 A 5.058 5.058 0 0 1 39.438 11.461 Q 39.693 12.2 39.804 13.103 A 12.342 12.342 0 0 1 39.891 14.609 Z M 57.922 15 L 57.922 23.844 A 0.895 0.895 0 0 1 57.883 24.111 A 0.753 0.753 0 0 1 57.758 24.352 A 0.497 0.497 0 0 1 57.533 24.511 Q 57.447 24.543 57.34 24.555 A 1.231 1.231 0 0 1 57.203 24.562 L 54.859 24.562 A 1.519 1.519 0 0 1 54.627 24.545 A 1.144 1.144 0 0 1 54.414 24.492 Q 54.219 24.422 54.047 24.219 L 53.078 22.969 L 52.969 22.969 Q 52.25 24.016 51.039 24.484 A 6.769 6.769 0 0 1 49.561 24.863 A 9.155 9.155 0 0 1 48.25 24.953 A 6.631 6.631 0 0 1 46.721 24.787 A 4.511 4.511 0 0 1 44.602 23.664 A 4.247 4.247 0 0 1 43.375 21.399 A 6.295 6.295 0 0 1 43.25 20.109 A 5.62 5.62 0 0 1 43.512 18.38 A 5.215 5.215 0 0 1 43.68 17.93 A 3.863 3.863 0 0 1 44.461 16.768 A 5.276 5.276 0 0 1 45.18 16.148 A 5.84 5.84 0 0 1 46.103 15.611 Q 46.593 15.379 47.189 15.185 A 13.466 13.466 0 0 1 48.18 14.906 Q 49.575 14.567 51.53 14.433 A 37.047 37.047 0 0 1 53.109 14.359 A 4.485 4.485 0 0 0 53.053 13.623 Q 52.909 12.762 52.398 12.312 A 2.233 2.233 0 0 0 51.64 11.885 Q 51.308 11.771 50.9 11.723 A 5.41 5.41 0 0 0 50.266 11.687 A 6.16 6.16 0 0 0 49.405 11.744 Q 48.96 11.807 48.589 11.94 A 3.065 3.065 0 0 0 48.172 12.125 A 33.361 33.361 0 0 0 47.889 12.279 Q 47.321 12.592 47.156 12.719 Q 46.946 12.899 46.648 12.863 A 0.896 0.896 0 0 1 46.625 12.859 A 4.918 4.918 0 0 1 46.133 12.759 A 6.277 6.277 0 0 1 45.727 12.641 A 25.036 25.036 0 0 1 45.232 12.473 A 31.402 31.402 0 0 1 44.703 12.281 A 0.573 0.573 0 0 1 44.637 12.249 Q 44.606 12.232 44.572 12.209 A 1.132 1.132 0 0 1 44.531 12.18 A 0.264 0.264 0 0 1 44.438 12.046 A 0.39 0.39 0 0 1 44.422 11.969 A 1.011 1.011 0 0 1 44.424 11.908 Q 44.426 11.878 44.429 11.845 A 2.282 2.282 0 0 1 44.438 11.773 A 2.313 2.313 0 0 1 44.447 11.708 Q 44.468 11.583 44.516 11.344 Q 44.578 11.031 44.703 10.57 Q 44.806 10.19 44.899 9.954 A 2.556 2.556 0 0 1 44.938 9.859 A 0.988 0.988 0 0 1 44.94 9.855 Q 45.062 9.627 45.323 9.422 A 2.265 2.265 0 0 1 45.406 9.359 A 1.107 1.107 0 0 1 45.566 9.255 Q 45.955 9.038 47.016 8.656 A 6.452 6.452 0 0 1 47.973 8.401 Q 48.989 8.204 50.425 8.176 A 24.99 24.99 0 0 1 50.906 8.172 A 10.42 10.42 0 0 1 53.64 8.499 Q 56.768 9.351 57.611 12.427 A 9.747 9.747 0 0 1 57.922 15 Z M 2.594 19.531 L 2.594 12.203 L 0.828 12.203 A 1.763 1.763 0 0 1 0.606 12.19 Q 0.365 12.159 0.232 12.056 A 0.43 0.43 0 0 1 0.18 12.008 A 0.556 0.556 0 0 1 0.074 11.832 Q 0 11.644 0 11.344 L 0 9.422 A 1.928 1.928 0 0 1 0.013 9.192 Q 0.048 8.901 0.18 8.758 A 0.498 0.498 0 0 1 0.355 8.639 Q 0.511 8.573 0.75 8.564 A 2.078 2.078 0 0 1 0.828 8.562 L 2.594 8.562 L 2.594 6.047 A 1.451 1.451 0 0 1 2.609 5.829 Q 2.626 5.715 2.663 5.623 A 0.644 0.644 0 0 1 2.75 5.469 A 7.495 7.495 0 0 1 3.328 4.804 Q 3.639 4.484 4.025 4.146 A 16.798 16.798 0 0 1 4.672 3.609 A 1.158 1.158 0 0 1 4.801 3.529 Q 4.867 3.493 4.929 3.474 A 0.457 0.457 0 0 1 5.063 3.453 A 0.493 0.493 0 0 1 5.272 3.502 Q 5.355 3.54 5.438 3.609 Q 6.015 4.052 6.437 4.449 A 8.614 8.614 0 0 1 6.57 4.578 A 8.886 8.886 0 0 1 7.041 5.076 A 6.911 6.911 0 0 1 7.359 5.469 A 0.676 0.676 0 0 1 7.466 5.679 Q 7.496 5.775 7.508 5.89 A 1.547 1.547 0 0 1 7.516 6.047 L 7.516 8.562 L 10.281 8.562 A 1.763 1.763 0 0 1 10.504 8.575 Q 10.744 8.606 10.877 8.709 A 0.43 0.43 0 0 1 10.93 8.758 A 0.556 0.556 0 0 1 11.036 8.934 Q 11.109 9.122 11.109 9.422 L 11.109 11.344 A 1.928 1.928 0 0 1 11.097 11.573 Q 11.062 11.864 10.93 12.008 A 0.498 0.498 0 0 1 10.754 12.127 Q 10.599 12.193 10.359 12.202 A 2.078 2.078 0 0 1 10.281 12.203 L 7.516 12.203 L 7.516 18.672 A 5.079 5.079 0 0 0 7.588 19.569 Q 7.869 21.127 9.248 21.171 A 2.542 2.542 0 0 0 9.328 21.172 A 2.518 2.518 0 0 0 9.63 21.155 A 1.992 1.992 0 0 0 9.844 21.117 A 4.5 4.5 0 0 0 10.037 21.068 Q 10.153 21.035 10.25 21 A 2.61 2.61 0 0 1 10.373 20.956 Q 10.579 20.889 10.686 20.902 A 0.22 0.22 0 0 1 10.711 20.906 Q 10.84 20.937 10.947 21.232 A 1.843 1.843 0 0 1 10.953 21.25 L 11.859 23.672 Q 11.978 24.003 11.761 24.177 A 0.553 0.553 0 0 1 11.672 24.234 A 2.484 2.484 0 0 1 11.561 24.282 Q 11.28 24.396 10.593 24.63 A 61.769 61.769 0 0 1 10.539 24.648 A 4.371 4.371 0 0 1 9.924 24.802 Q 9.098 24.953 7.813 24.953 A 7.208 7.208 0 0 1 5.716 24.675 Q 3.411 23.973 2.808 21.504 A 8.333 8.333 0 0 1 2.594 19.531 Z M 76.641 23.391 L 73.375 24.891 Q 73.047 25.031 72.906 25.031 A 0.414 0.414 0 0 1 72.766 25.006 Q 72.69 24.978 72.609 24.922 A 1.113 1.113 0 0 1 72.413 24.74 Q 72.128 24.414 71.789 23.695 A 3.728 3.728 0 0 1 71.548 22.992 Q 71.369 22.259 71.336 21.191 A 16.175 16.175 0 0 1 71.328 20.688 L 71.328 2.594 A 1.451 1.451 0 0 1 71.343 2.376 Q 71.361 2.262 71.398 2.17 A 0.644 0.644 0 0 1 71.484 2.016 A 7.495 7.495 0 0 1 72.062 1.351 Q 72.373 1.031 72.76 0.693 A 16.798 16.798 0 0 1 73.406 0.156 A 1.158 1.158 0 0 1 73.535 0.076 Q 73.602 0.04 73.664 0.021 A 0.457 0.457 0 0 1 73.797 0 A 0.549 0.549 0 0 1 74.063 0.071 A 0.774 0.774 0 0 1 74.188 0.156 Q 74.765 0.599 75.187 0.996 A 8.614 8.614 0 0 1 75.32 1.125 A 8.886 8.886 0 0 1 75.791 1.623 A 6.911 6.911 0 0 1 76.109 2.016 A 0.676 0.676 0 0 1 76.216 2.226 Q 76.246 2.322 76.258 2.437 A 1.547 1.547 0 0 1 76.266 2.594 L 76.266 19.734 A 10.442 10.442 0 0 0 76.29 20.465 Q 76.33 21.038 76.438 21.492 A 7.242 7.242 0 0 0 76.563 21.958 Q 76.632 22.183 76.71 22.37 A 3.14 3.14 0 0 0 76.844 22.656 Q 77.064 23.084 76.779 23.308 A 0.711 0.711 0 0 1 76.641 23.391 Z M 67.078 9.391 L 67.078 23.734 A 1.763 1.763 0 0 1 67.065 23.957 Q 67.034 24.197 66.931 24.33 A 0.43 0.43 0 0 1 66.883 24.383 A 0.556 0.556 0 0 1 66.707 24.489 Q 66.519 24.562 66.219 24.562 L 63 24.562 A 1.928 1.928 0 0 1 62.77 24.55 Q 62.479 24.515 62.336 24.383 A 0.498 0.498 0 0 1 62.217 24.207 Q 62.151 24.052 62.142 23.812 A 2.078 2.078 0 0 1 62.141 23.734 L 62.141 9.391 A 1.763 1.763 0 0 1 62.154 9.168 Q 62.184 8.928 62.288 8.795 A 0.43 0.43 0 0 1 62.336 8.742 A 0.556 0.556 0 0 1 62.512 8.636 Q 62.7 8.562 63 8.562 L 66.219 8.562 A 1.928 1.928 0 0 1 66.449 8.575 Q 66.739 8.61 66.883 8.742 A 0.498 0.498 0 0 1 67.002 8.918 Q 67.068 9.073 67.077 9.313 A 2.078 2.078 0 0 1 67.078 9.391 Z M 61.422 3.312 Q 61.422 3.109 61.547 2.953 A 40.829 40.829 0 0 1 61.614 2.869 Q 61.707 2.753 61.833 2.599 A 130.031 130.031 0 0 1 61.875 2.547 A 14.658 14.658 0 0 1 62.348 2.033 A 19.408 19.408 0 0 1 62.891 1.492 A 31.985 31.985 0 0 1 64.063 0.422 Q 64.438 0.125 64.625 0.125 Q 64.813 0.125 65.203 0.422 Q 66.469 1.516 67.359 2.547 Q 67.562 2.781 67.695 2.945 A 0.569 0.569 0 0 1 67.828 3.312 A 0.539 0.539 0 0 1 67.695 3.672 Q 67.563 3.828 67.344 4.094 A 16.261 16.261 0 0 1 66.887 4.596 A 22.17 22.17 0 0 1 66.359 5.133 A 19.932 19.932 0 0 1 65.203 6.187 Q 65.03 6.336 64.916 6.401 A 0.603 0.603 0 0 1 64.859 6.43 Q 64.739 6.482 64.633 6.484 A 0.441 0.441 0 0 1 64.625 6.484 A 0.486 0.486 0 0 1 64.485 6.463 A 0.637 0.637 0 0 1 64.398 6.43 Q 64.283 6.376 64.04 6.194 A 7.298 7.298 0 0 1 64.031 6.187 Q 63.406 5.687 62.859 5.133 A 21.222 21.222 0 0 1 62.234 4.471 A 17.149 17.149 0 0 1 61.875 4.062 A 52.183 52.183 0 0 0 61.778 3.944 Q 61.684 3.828 61.61 3.739 A 16.622 16.622 0 0 0 61.547 3.664 A 0.528 0.528 0 0 1 61.422 3.313 Z M 53.078 19.078 L 53.078 17.344 A 22.556 22.556 0 0 0 51.942 17.37 Q 50.915 17.422 50.217 17.576 A 4.937 4.937 0 0 0 49.82 17.68 A 5 5 0 0 0 49.281 17.879 Q 48.733 18.12 48.462 18.439 A 1.249 1.249 0 0 0 48.375 18.555 Q 48.016 19.094 48.016 19.719 Q 48.016 20.625 48.578 20.977 A 2.228 2.228 0 0 0 49.295 21.261 Q 49.587 21.324 49.924 21.328 A 3.851 3.851 0 0 0 49.969 21.328 A 4.487 4.487 0 0 0 50.799 21.256 Q 51.263 21.169 51.625 20.975 A 2.185 2.185 0 0 0 52.141 20.594 A 4.37 4.37 0 0 0 52.633 20.013 Q 52.954 19.554 53.078 19.078 Z"
                    vector-effect="non-scaling-stroke" />
            </g>
        </svg>
        <span style="flex: 1;"></span>
        <div class="menu">

            <span id="current-mail">loading...</span>
            <svg fill="currentColor" class="icon-s" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                onclick="navigator.clipboard.writeText(document.getElementById('current-mail').innerText);">
                <path
                    d="M3,18 L3.11662113,17.9932723 C3.57570299,17.9399506 3.93995063,17.575703 3.99327227,17.1166211 L4,17 L4,4 L17,4 L17.1166211,3.99327227 C17.6139598,3.93550716 18,3.51283584 18,3 C18,2.48716416 17.6139598,2.06449284 17.1166211,2.00672773 L17,2 L3,2 L2.88337887,2.00672773 C2.42429701,2.06004937 2.06004937,2.42429701 2.00672773,2.88337887 L2,3 L2,17 L2.00672773,17.1166211 C2.06004937,17.575703 2.42429701,17.9399506 2.88337887,17.9932723 L3,18 Z M21,22 L21.1166211,21.9932723 C21.575703,21.9399506 21.9399506,21.575703 21.9932723,21.1166211 L22,21 L22,7 L21.9932723,6.88337887 C21.9443941,6.46255383 21.6342517,6.12141588 21.2292908,6.02641071 L21.1166211,6.00672773 L21,6 L7,6 L6.88337887,6.00672773 C6.42429701,6.06004937 6.06004937,6.42429701 6.00672773,6.88337887 L6,7 L6,21 L6.00672773,21.1166211 C6.0556059,21.5374462 6.36574828,21.8785841 6.77070917,21.9735893 L6.88337887,21.9932723 L7,22 L21,22 Z M8,20 L8,8 L20,8 L20,20 L8,20 Z" />
            </svg>
            <svg fill="currentColor" class="icon-s" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                onclick="editCurrentMail()" style="margin-right: 10px;">
                <path
                    d="M21,12a1,1,0,0,0-1,1v6a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V5A1,1,0,0,1,5,4h6a1,1,0,0,0,0-2H5A3,3,0,0,0,2,5V19a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V13A1,1,0,0,0,21,12ZM6,12.76V17a1,1,0,0,0,1,1h4.24a1,1,0,0,0,.71-.29l6.92-6.93h0L21.71,8a1,1,0,0,0,0-1.42L17.47,2.29a1,1,0,0,0-1.42,0L13.23,5.12h0L6.29,12.05A1,1,0,0,0,6,12.76ZM16.76,4.41l2.83,2.83L18.17,8.66,15.34,5.83ZM8,13.17l5.93-5.93,2.83,2.83L10.83,16H8Z" />
            </svg>
            <svg fill="currentColor" class="icon-b" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg"
                onclick="syncMail(true);">
                <path
                    d="M0 9.875v12.219c0 1.125 0.469 2.125 1.219 2.906 0.75 0.75 1.719 1.156 2.844 1.156h6.125v-2.531h-6.125c-0.844 0-1.5-0.688-1.5-1.531v-12.219c0-0.844 0.656-1.5 1.5-1.5h6.125v-2.563h-6.125c-1.125 0-2.094 0.438-2.844 1.188-0.75 0.781-1.219 1.75-1.219 2.875zM6.719 13.563v4.875c0 0.563 0.5 1.031 1.063 1.031h5.656v3.844c0 0.344 0.188 0.625 0.5 0.781 0.125 0.031 0.25 0.031 0.313 0.031 0.219 0 0.406-0.063 0.563-0.219l7.344-7.344c0.344-0.281 0.313-0.844 0-1.156l-7.344-7.313c-0.438-0.469-1.375-0.188-1.375 0.563v3.875h-5.656c-0.563 0-1.063 0.469-1.063 1.031z">
                </path>
            </svg>
        </div>
    </nav>
    <main>
        <div class="mails" id="mail-list"></div>
        <div class="inbox-intro">
            <svg xmlns="http://www.w3.org/2000/svg" height="200" style="position: relative; left: -30px;"
                viewBox="0 0 498.09869 646.465" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path
                    d="M497.85558,369.39014,358.82286,339.39852l-1.80686-.38885a5.00224,5.00224,0,0,0-5.54552,7.10585L406.67216,458.217a5.0183,5.0183,0,0,0,3.72746,2.72926,4.96825,4.96825,0,0,0,4.37912-1.50154l38.34178-40.42814a2.91036,2.91036,0,0,1,2.13875-.93407,3.01064,3.01064,0,0,1,2.67965,1.558l7.8535,14.52626a4.88621,4.88621,0,0,0,5.47116,2.50722l.03909-.00865a4.893,4.893,0,0,0,3.87711-4.6473l1.57322-33.53178a3.05774,3.05774,0,0,1,.307-1.20476,3.254,3.254,0,0,1,.78832-.97333L499.968,378.15066a5.00564,5.00564,0,0,0-2.11243-8.76052Zm.84922,7.21694-22.11962,18.15759a4.93346,4.93346,0,0,0-.77862.78665l-117.235-53.16816a1.74378,1.74378,0,0,0-.32206-.113,2.00253,2.00253,0,0,0-1.66918,3.56479l96.39341,70.80742a4.79554,4.79554,0,0,0-1.30551.99549l-38.34133,40.42792a3.00049,3.00049,0,0,1-4.86432-.73653L353.26092,345.22777a3.00779,3.00779,0,0,1,3.32825-4.25969l1.84977.39973,138.98933,29.98084a3.00669,3.00669,0,0,1,1.27653,5.25843Z"
                    transform="translate(-350.95066 -126.7675)" fill="#5850EC" />
                <path
                    d="M527.492,769.29283c-12.47123-3.36845-27.64871-17.37787-24.39937-36.6341,1.61151-9.55,7.79666-15.732,14.20994-19.72938,8.87087-5.52915,18.97378-7.61271,28.70983-8.13908,11.22989-.60717,22.44725.92373,33.59325,2.54269,11.00345,1.59829,22.00778,3.02939,33.06039,3.90316A426.181,426.181,0,0,0,741.70229,701.655q15.6504-3.61166,31.11314-8.47413a213.747,213.747,0,0,0,28.5787-10.6814c12.25583-5.884,32.18686-17.3338,30.56169-38.53888-.86174-11.24352-7.48306-20.2235-14.16178-26.47976-8.07544-7.56463-17.41979-12.54174-26.57194-17.37492-42.57048-22.4815-85.22406-44.6961-127.836-67.04222-9.94515-5.21531-19.95642-10.29093-29.60825-16.40265-9.03649-5.72208-18.03069-12.36888-25.30284-21.55935-6.35165-8.02718-12.02739-18.80349-11.82714-30.84974.16606-9.99023,4.71231-18.46777,10.28032-24.8036,13.7853-15.68634,33.28584-22.0464,50.91043-25.37786,21.89667-4.139,44.11031-4.11759,66.02128-8.11429,17.69177-3.22713,36.59531-9.457,50.98378-24.05564a45.59972,45.59972,0,0,0,12.42882-21.71495,42.67829,42.67829,0,0,0-2.55578-25.76791c-3.89761-9.30966-10.11483-16.72577-16.65218-22.79845a99.91441,99.91441,0,0,0-25.25625-16.87337c-19.43291-9.26029-39.86761-14.08181-59.77313-21.18824-9.76212-3.48516-19.623-7.30685-28.68774-13.29314-7.67975-5.07168-16.04558-11.90785-20.31823-22.07381-8.81554-20.97479,12.21534-33.47549,24.13206-38.21054a155.15636,155.15636,0,0,1,24.94085-7.13994c1.79691-.38581,1.03448-3.97259-.754-3.58863a149.21671,149.21671,0,0,0-26.19085,7.64761c-7.18613,2.98571-14.60076,6.9095-20.24543,13.66154a28.43768,28.43768,0,0,0-6.42551,22.23459c1.4951,10.0639,7.99422,17.81842,14.098,23.43518,8.07158,7.42755,17.27457,12.27825,26.6055,16.23233,9.82719,4.16437,19.86291,7.40982,29.89527,10.59326,20.04681,6.36116,40.993,12.03,59.0898,25.5661,12.65931,9.469,29.85671,27.22287,25.64575,49.2291-1.86927,9.76868-7.54569,17.40622-13.67139,23.0237a79.6032,79.6032,0,0,1-24.484,14.88719c-40.10267,16.13908-84.23837,4.59774-123.3075,26.518-13.28375,7.453-29.41873,21.02272-29.54861,42.37352-.06743,11.09128,4.37845,21.26357,9.87491,29.30381,6.5832,9.63,15.108,16.75124,23.78148,22.703a276.82338,276.82338,0,0,0,28.39866,16.44217q16.03077,8.42025,32.06858,16.81772l64.884,34.02583L785.05473,600.852c9.83916,5.15974,19.931,10.10922,28.877,17.68346,7.32486,6.20174,15.979,16.37607,15.23163,29.00981-.5935,10.03327-7.25874,17.27376-13.34932,22.11458-7.88668,6.26837-16.74607,10.32273-25.56086,13.69186-10.16729,3.886-20.50176,7.10958-30.85626,10.00791a416.59168,416.59168,0,0,1-64.73684,12.67106A425.69163,425.69163,0,0,1,628.895,708.482q-16.6374-.66953-33.22314-2.66157c-11.39758-1.37281-22.74638-3.48763-34.17334-4.4259-10.33591-.8487-20.77138-.652-30.95021,2.07575-8.49907,2.27761-17.47811,6.33735-23.92963,14.2589a31.54336,31.54336,0,0,0-6.69562,21.30473,38.25646,38.25646,0,0,0,7.84294,21.11157,35.4889,35.4889,0,0,0,18.97222,12.7361c1.78156.48118,2.54349-3.10534.754-3.58863Z"
                    transform="translate(-350.95066 -126.7675)" fill="#e6e6e6" />
                <rect x="174.06608" y="644.22427" width="324.03261" height="2.24072" fill="#3f3d56" />
                <circle cx="472.13713" cy="517.5024" r="21.16809" fill="#e6e6e6" />
                <circle cx="433.51814" cy="219.14839" r="21.1681" fill="#e6e6e6" />
                <path
                    d="M736.6097,127.653l-58.777,25.55173a10.69385,10.69385,0,0,0-5.53753,14.05476l18.2512,41.98347a10.6938,10.6938,0,0,0,14.05477,5.53757l58.777-25.55173A10.69382,10.69382,0,0,0,768.9157,175.174l-18.2512-41.98347A10.69386,10.69386,0,0,0,736.6097,127.653Zm2.4335,5.5978a4.55688,4.55688,0,0,1,1.09871-.31636L720.27009,170.4267l-40.8146-11.16918a4.58053,4.58053,0,0,1,.81072-.455Zm21.90145,50.3802-58.777,25.55173a4.58317,4.58317,0,0,1-6.02348-2.37327L678.05688,165.203l42.9598,11.75636a3.052,3.052,0,0,0,3.50205-1.5145l20.79933-39.24265,17.99983,41.40525A4.58318,4.58318,0,0,1,760.94465,183.631Z"
                    transform="translate(-350.95066 -126.7675)" fill="#e6e6e6" />
                <circle cx="319.73326" cy="311.53784" r="53.51916" fill="#5850EC" />
                <path
                    d="M662.251,771.65067H647.49121a6.50753,6.50753,0,0,1-6.5-6.5V642.137a6.50753,6.50753,0,0,1,6.5-6.5H662.251a6.50753,6.50753,0,0,1,6.5,6.5V765.15067A6.50753,6.50753,0,0,1,662.251,771.65067Z"
                    transform="translate(-350.95066 -126.7675)" fill="#2f2e41" />
                <path
                    d="M691.44336,771.65067H676.68359a6.50753,6.50753,0,0,1-6.5-6.5V642.137a6.50753,6.50753,0,0,1,6.5-6.5h14.75977a6.50753,6.50753,0,0,1,6.5,6.5V765.15067A6.50753,6.50753,0,0,1,691.44336,771.65067Z"
                    transform="translate(-350.95066 -126.7675)" fill="#2f2e41" />
                <path
                    d="M752.60645,629.27372a6.54421,6.54421,0,0,1-1.91309-.28809,6.4603,6.4603,0,0,1-3.83594-3.168l-57.665-108.66113a6.49944,6.49944,0,0,1,2.69434-8.78809l13.03711-6.91894a6.49864,6.49864,0,0,1,8.78906,2.69433L771.377,612.805a6.49785,6.49785,0,0,1-2.69433,8.78808L755.64551,628.512A6.45965,6.45965,0,0,1,752.60645,629.27372Z"
                    transform="translate(-350.95066 -126.7675)" fill="#5850EC" />
                <path
                    d="M632.56348,529.11649a6.46045,6.46045,0,0,1-2.28321-.417h-.001L515.20166,485.22586a6.49367,6.49367,0,0,1-3.77539-8.377l5.20605-13.80762a6.51872,6.51872,0,0,1,8.38623-3.77734l115.0752,43.46387a6.51786,6.51786,0,0,1,3.78613,8.375l-5.21582,13.80957A6.52931,6.52931,0,0,1,632.56348,529.11649Z"
                    transform="translate(-350.95066 -126.7675)" fill="#5850EC" />
                <rect x="279.59389" y="374.35506" width="79.06239" height="154.47574" rx="6" fill="#2f2e41" />
                <path
                    d="M710.2148,385.89448c3.14447,6.90062,6.15456,15.24071,2.76979,22.62258a12.72387,12.72387,0,0,1-6.516,6.70769c-3.48856,1.39154-7.29105.59741-10.52366-1.0849-6.80615-3.542-11.19315-10.12369-17.2701-14.63276a20.53442,20.53442,0,0,0-9.504-4.0958c-3.9931-.52048-7.95718.42133-11.86275,1.14845-4.15382.77333-8.44682,1.18146-12.29128-.92481a18.04425,18.04425,0,0,1-7.5408-8.61525c-.79169-1.75741-3.37783-.23376-2.59041,1.51416,3.269,7.25667,10.02943,12.20159,18.15233,11.62967,4.298-.30262,8.44935-1.69044,12.75467-1.88923a17.04345,17.04345,0,0,1,10.90314,3.4856c6.67216,4.756,11.20045,12.06,18.85468,15.51434,3.61146,1.62982,7.74711,2.30915,11.55481.9055a15.14759,15.14759,0,0,0,7.73706-6.7377c5.02336-8.64913,1.797-18.64769-2.03711-27.0617-.79947-1.75445-3.38585-.23145-2.59041,1.51416Z"
                    transform="translate(-350.95066 -126.7675)" fill="#2f2e41" />
                <path
                    d="M676.60059,456.17508c-3.30567-.09277-7.4209-.208-10.58985-2.52343a8.13393,8.13393,0,0,1-3.20019-6.07227,5.47021,5.47021,0,0,1,1.86035-4.49316c1.6543-1.39893,4.07129-1.72754,6.67871-.96094l-2.7002-19.72608,1.98243-.27148,3.17285,23.18945-1.6543-.7583c-1.917-.87988-4.55176-1.32861-6.18848.05469a3.51473,3.51473,0,0,0-1.15234,2.895,6.14725,6.14725,0,0,0,2.38086,4.52783c2.4668,1.80176,5.74609,2.03516,9.4668,2.13867Z"
                    transform="translate(-350.95066 -126.7675)" fill="#2f2e41" />
                <rect x="297.12845" y="297.33288" width="10.77148" height="2" fill="#2f2e41" />
                <rect x="331.12845" y="297.33288" width="10.77148" height="2" fill="#2f2e41" />
                <path
                    d="M630.4559,528.23209l-47.29355-14.42094a6,6,0,0,1-4.06563-7.21509l5.52108-21.75436a6,6,0,0,1,8.39144-3.943l46.90816,22.29692a6.01089,6.01089,0,0,1,3.49516,7.73035l-5.21658,13.8101A6.01071,6.01071,0,0,1,630.4559,528.23209Z"
                    transform="translate(-350.95066 -126.7675)" fill="#2f2e41" />
                <path
                    d="M690.04241,515.92583,710.325,561.0175a6,6,0,0,0,7.67107,3.12113l20.88212-8.22628a6,6,0,0,0,2.85081-8.82249l-28.04671-43.714a6.01089,6.01089,0,0,0-8.11011-2.49011l-13.04,6.92017A6.01071,6.01071,0,0,0,690.04241,515.92583Z"
                    transform="translate(-350.95066 -126.7675)" fill="#2f2e41" />
                <path
                    d="M497.85558,369.39014,358.82286,339.39852l-1.80686-.38885a5.00224,5.00224,0,0,0-5.54552,7.10585L406.67216,458.217a5.0183,5.0183,0,0,0,3.72746,2.72926,4.96825,4.96825,0,0,0,4.37912-1.50154l38.34178-40.42814a2.91036,2.91036,0,0,1,2.13875-.93407,3.01064,3.01064,0,0,1,2.67965,1.558l7.8535,14.52626a4.88621,4.88621,0,0,0,5.47116,2.50722l.03909-.00865a4.893,4.893,0,0,0,3.87711-4.6473l1.57322-33.53178a3.05774,3.05774,0,0,1,.307-1.20476,3.254,3.254,0,0,1,.78832-.97333L499.968,378.15066a5.00564,5.00564,0,0,0-2.11243-8.76052Zm.84922,7.21694-22.11962,18.15759a4.93346,4.93346,0,0,0-.77862.78665,4.64685,4.64685,0,0,0-.53242.83481,4.79649,4.79649,0,0,0-.36273.95079l.00217.00977a4.73079,4.73079,0,0,0-.15751,1.04879l-1.57276,33.53167a2.90448,2.90448,0,0,1-2.32273,2.7876l-.01955.00433a2.91087,2.91087,0,0,1-3.2907-1.49442l-7.85566-14.536a4.98939,4.98939,0,0,0-4.09973-2.60589l-.00954.00211c-.11421-.00536-.228-.01094-.33956-.00675a4.86576,4.86576,0,0,0-2.27209.56424,4.79554,4.79554,0,0,0-1.30551.99549l-38.34133,40.42792a3.00049,3.00049,0,0,1-4.86432-.73653L353.26092,345.22777a3.00779,3.00779,0,0,1,3.32825-4.25969l1.84977.39973,138.98933,29.98084a3.00669,3.00669,0,0,1,1.27653,5.25843Z"
                    transform="translate(-350.95066 -126.7675)" fill="#3f3d56" />
                <path
                    d="M476.25014,395.75022l-.82617,1.8216-.51039-.22513-.00217-.00977L357.76929,344.22l97.81611,71.86487.00954-.00211.259.19874-1.17942,1.61283-1.70078-1.252-96.39341-70.80742a2.00253,2.00253,0,0,1,1.66918-3.56479,1.74378,1.74378,0,0,1,.32206.113l117.235,53.16816Z"
                    transform="translate(-350.95066 -126.7675)" fill="#3f3d56" />
            </svg>
            <p>you mails will be shown here</p>
        </div>
    </main>
    <button class="refresh-btn" id="refresh-btn" onclick="fetchMails()">
        <svg class="icon-b" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" version="1.1">
            <path style="fill:var(--business);stroke:#041E31;stroke-width:3;"
                d="M 93,62 C 83,82 65,96 48,96 32,96 19,89 15,79 L 5,90 5,53 40,53 29,63 c 0,0 5,14 26,14 16,0 38,-15 38,-15 z" />
            <path style="fill:var(--business);stroke:#041E31;stroke-width:3;"
                d="M 5,38 C 11,18 32,4 49,4 65,4 78,11 85,21 L 95,10 95,47 57,47 68,37 C 68,37 63,23 42,23 26,23 5,38 5,38 z" />
        </svg>
    </button>
    <div class="mail-view" id="mail-view">
        <div class="head-btns">
            <span><b>From: </b><span id="mail-from">malay77patra@gmail.com</span></span>
            <svg fill="currentColor" class="icon-s" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                onclick="navigator.clipboard.writeText(document.getElementById('mail-from').innerText);">
                <path
                    d="M3,18 L3.11662113,17.9932723 C3.57570299,17.9399506 3.93995063,17.575703 3.99327227,17.1166211 L4,17 L4,4 L17,4 L17.1166211,3.99327227 C17.6139598,3.93550716 18,3.51283584 18,3 C18,2.48716416 17.6139598,2.06449284 17.1166211,2.00672773 L17,2 L3,2 L2.88337887,2.00672773 C2.42429701,2.06004937 2.06004937,2.42429701 2.00672773,2.88337887 L2,3 L2,17 L2.00672773,17.1166211 C2.06004937,17.575703 2.42429701,17.9399506 2.88337887,17.9932723 L3,18 Z M21,22 L21.1166211,21.9932723 C21.575703,21.9399506 21.9399506,21.575703 21.9932723,21.1166211 L22,21 L22,7 L21.9932723,6.88337887 C21.9443941,6.46255383 21.6342517,6.12141588 21.2292908,6.02641071 L21.1166211,6.00672773 L21,6 L7,6 L6.88337887,6.00672773 C6.42429701,6.06004937 6.06004937,6.42429701 6.00672773,6.88337887 L6,7 L6,21 L6.00672773,21.1166211 C6.0556059,21.5374462 6.36574828,21.8785841 6.77070917,21.9735893 L6.88337887,21.9932723 L7,22 L21,22 Z M8,20 L8,8 L20,8 L20,20 L8,20 Z" />
            </svg>
            <span style="flex: 1;"></span>
            <svg class="icon-s" viewBox="0 0 15 15" version="1.1" xmlns="http://www.w3.org/2000/svg"
                onclick="document.getElementById('mail-view').classList.remove('mail-view-shown');">
                <path
                    d="M2.64,1.27L7.5,6.13l4.84-4.84C12.5114,1.1076,12.7497,1.0029,13,1c0.5523,0,1,0.4477,1,1&#xA;&#x9;c0.0047,0.2478-0.093,0.4866-0.27,0.66L8.84,7.5l4.89,4.89c0.1648,0.1612,0.2615,0.3796,0.27,0.61c0,0.5523-0.4477,1-1,1&#xA;&#x9;c-0.2577,0.0107-0.508-0.0873-0.69-0.27L7.5,8.87l-4.85,4.85C2.4793,13.8963,2.2453,13.9971,2,14c-0.5523,0-1-0.4477-1-1&#xA;&#x9;c-0.0047-0.2478,0.093-0.4866,0.27-0.66L6.16,7.5L1.27,2.61C1.1052,2.4488,1.0085,2.2304,1,2c0-0.5523,0.4477-1,1-1&#xA;&#x9;C2.2404,1.0029,2.4701,1.0998,2.64,1.27z" />
            </svg>
        </div>
        <div id="mail-html">
        </div>
    </div>

    <script>
        const currentMail = document.getElementById('current-mail');
        const versionKey = 'd43bec1c-17a6-4324-83b3-fd21e9344d13';
        const refreshBtn = document.getElementById('refresh-btn');
        const mailList = document.getElementById('mail-list');
        const mailHtml = document.getElementById('mail-html');
        const mailFrom = document.getElementById('mail-from');
        const mailView = document.getElementById('mail-view');

        function showMail(el) {
            const emailObj = JSON.parse(el.dataset.email);
            mailFrom.innerHTML = emailObj.from;
            mailHtml.innerHTML = emailObj.html;
            mailView.classList.add('mail-view-shown');
        }

        function validateInput(value) {
            const lengthValid = value.length === 6;
            const charactersValid = /^[a-zA-Z0-9]+$/.test(value);

            if (!lengthValid) {
                return { message: 'Input must be 6 characters long', test: false };
            }
            if (!charactersValid) {
                return { message: 'Input must contain only lettrs and digits', test: false };
            }
            return { test: true };
        }
        async function editCurrentMail() {

            const { value: tagValue } = await Swal.fire({
                input: "text",
                inputLabel: "Enter a 6 characters tag",
                showCancelButton: true,
                inputValidator: (value) => {
                    testRes = validateInput(value);
                    if (!testRes.test) {
                        return testRes.message;
                    }
                }
            });

            if (tagValue) {
                const storedMailFromStorage = localStorage.getItem(versionKey + "_mail");
                let updatedEmail = storedMailFromStorage.replace(/.{6}(?=@)/, tagValue);
                localStorage.setItem(versionKey + "_mail", updatedEmail);
                syncMail();
            }
        }

        function listEmails(emailObj) {
            emailObj.emails.forEach((email) => {
                const timestamp = email.timestamp;
                const date = new Date(timestamp);
                const now = new Date();

                let formattedDate;
                const diff = now - date;

                if (diff < 60000) {
                    formattedDate = "Just now";
                } else if (now.toDateString() === date.toDateString()) {
                    formattedDate = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                } else {
                    formattedDate = date.toLocaleDateString();
                }

                const newMail = document.createElement('div');
                newMail.classList.add('mail');
                newMail.setAttribute('data-email', JSON.stringify({ from: email.envelope_from, html: email.html }));
                newMail.innerHTML = `<p>${email.subject}</p>
                <p>${email.text}</p>
                <span>${email.from} &#8226; ${formattedDate}</span>
                <span class="border-btm"></span>`;
                newMail.setAttribute('onclick', 'showMail(this)');
                mailList.appendChild(newMail);
            });
        }


        function syncMail(getNew = false) {
            if (!getNew) {
                storedMailFromStorage = localStorage.getItem(versionKey + "_mail");
                currentMail.innerText = storedMailFromStorage;
                fetchMails(storedMailFromStorage);
            } else {
                currentMail.innerText = 'loading...';
                fetch('/new')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok ' + response.statusText);
                        }
                        return response.json();
                    })
                    .then(data => {
                        currentMail.innerText = data.mail;
                        localStorage.setItem(versionKey + "_mail", data.mail);
                        fetchMails(data.mail);
                    })
                    .catch(error => {
                        console.error('There has been a problem with your fetch operation:', error);
                    });

            }
        }

        function fetchMails(mail = currentMail.innerText) {
            refreshBtn.classList.add('rotating');
            refreshBtn.disabled = true;
            mailList.innerHTML = '';
            fetch(`/mails?tag=${mail.split('@')[0].split('.')[1]}`)
                .then(response => {
                    if (!response.ok) {
                        refreshBtn.classList.remove('rotating');
                        refreshBtn.disabled = false;
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    refreshBtn.classList.remove('rotating');
                    refreshBtn.disabled = false;
                    listEmails(data);
                })
                .catch(error => {
                    refreshBtn.classList.remove('rotating');
                    refreshBtn.disabled = false;
                    console.error('There has been a problem with your fetch operation:', error);
                });

        }



        //
        syncMail(!localStorage.getItem(versionKey + "_mail"));
    </script>
</body>

</html>
